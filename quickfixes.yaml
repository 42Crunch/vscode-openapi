fixes:
  - problem:
      - global-security
      - v3-global-security
    title: Create 'security' property
    type: insert
    fix:
      security:
        - securityRequirement: []
    parameters:
      - name: name
        path: /security/0/securityRequirement
        type: key

  - problem:
      - parameter-array-maxitems
      - response-header-array-maxitems
      - schema-array-maxitems
      - v3-schema-array-maxitems
    title: Create 'maxItems' property
    type: insert
    fix:
      maxItems: 100
    parameters:
      - name: items
        path: /maxItems

  # TODO limit format to intX or float/double based on type
  - problem:
      - parameter-numerical-format
      - response-header-numerical-format
      - schema-numerical-format
      - v3-schema-numerical-format
    title: Create 'format' property
    type: insert
    fix:
      format: int32
    parameters:
      - name: format
        path: /format
        values:
          - int32
          - int64
          - float
          - double

  - problem:
      - parameter-numerical-max
      - response-header-numerical-max
      - schema-numerical-max
      - v3-schema-numerical-max
    title: Create 'maximum' property
    type: insert
    fix:
      maximum: 1024
    parameters:
      - name: maximum
        path: /maximum

  - problem:
      - parameter-numerical-min
      - response-header-numerical-min
      - schema-numerical-min
      - v3-schema-numerical-min
    title: Create 'minimum' property
    type: insert
    fix:
      minimum: 0
    parameters:
      - name: minimum
        path: /minimum

  # FIXME implement replace value in the existing property
  #  - problem:
  #      - parameter-string-loosepattern
  #    title: Change regular rexpresion in 'pattern' property
  #    type: replace
  #    pointer: /pattern
  #    fix:
  #      pattern: ^example[0-9a-f]{8}$
  #    parameters:
  #      - name: pattern
  #        path: /pattern

  - problem:
      - parameter-string-maxlength
      - response-header-string-maxlength
      - schema-string-maxlength
      - v3-schema-string-maxlength
    title: Create 'maxLength' property
    type: insert
    fix:
      maxLength: 32
    parameters:
      - name: maxlen
        path: /maxLength

  - problem:
      - parameter-string-pattern
      - response-header-string-pattern
      - schema-string-pattern
      - v3-schema-string-pattern
    title: Create 'pattern' property
    type: insert
    fix:
      pattern: ^example[0-9a-f]{8}$
    parameters:
      - name: pattern
        path: /pattern

  - problem:
      - v3-response-post-2xx
      - v3-response-put-2xx
      - v3-response-get-2xx
      - v3-response-delete-2xx
      # TODO our OPTIONS example shows Allows header present, decide if we should include
      # it in the fix
      - v3-response-options-2xx
      - v3-response-patch-2xx
    title: Add 200 response
    type: insert
    fix:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/'
    parameters:
      - name: description
        path: /200/description
      - name: contentType
        path: /200/content/application~1json
        type: key
      - name: schema
        path: /200/content/application~1json/schema/$ref

  - problem:
      - v3-response-delete-2xx
      - v3-response-patch-2xx
    title: Add 202 response
    type: insert
    fix:
      '202':
        description: Accepted
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/'
    parameters:
      - name: description
        path: /202/description
      - name: contentType
        path: /202/content/application~1json
        type: key
      - name: schema
        path: /202/content/application~1json/schema/$ref

  - problem:
      - v3-response-post-2xx
      - v3-response-put-2xx
      - v3-response-delete-2xx
      - v3-response-patch-2xx
    title: Add 204 response
    type: insert
    fix:
      '204':
        description: Created
    parameters:
      - name: description
        path: /204/description

  - problem:
      - v3-response-head-2xx
    title: Add 200 or 202 response
    type: insert
    fix:
      '200':
        description: OK
    parameters:
      - name: code
        path: /200
        values:
          - '200'
          - '202'
        type: key
      - name: description
        path: /200/description

  - problem:
      - v3-response-default-undefined
    title: Add default response
    type: insert
    fix:
      'default':
        description: Default
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/'
    parameters:
      - name: description
        path: /default/description
      - name: contentType
        path: /default/content/application~1json
        type: key
      - name: schema
        path: /default/content/application~1json/schema/$ref
